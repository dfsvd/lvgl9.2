cmake_minimum_required(VERSION 3.10)
project(lvgl)

set(CMAKE_C_STANDARD 99)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# ------------------------------------------------------------------
# ğŸš€ å…³é”®ä¿®æ­£ï¼šæ·»åŠ  -static é“¾æ¥å™¨æ ‡å¿—ï¼Œå¼ºåˆ¶å®Œå…¨é™æ€é“¾æ¥
# è¿™ä¼šå¿½ç•¥æ‰€æœ‰çš„åŠ¨æ€åº“ä¾èµ–ï¼Œå°†æ‰€æœ‰ä»£ç å’Œåº“ï¼ˆåŒ…æ‹¬ glibcï¼‰æ‰“åŒ…è¿› mainã€‚
set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static")

# ç§»é™¤ RPATH è®¾ç½®ï¼Œå› ä¸ºé™æ€é“¾æ¥ä¸å†éœ€è¦å®ƒ
# set(CMAKE_C_FLAGS "-Wl,-rpath=/root") 
# ------------------------------------------------------------------

set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)

add_subdirectory(lvgl)
target_include_directories(lvgl PUBLIC ${PROJECT_SOURCE_DIR})

add_executable(main src/main.c)
# ... (ä¸­é—´éƒ¨åˆ†ä¿æŒä¸å˜) ...

# æœ€ç»ˆçš„ target_link_libraries ä¿æŒä¸å˜ï¼Œä½†é“¾æ¥å™¨ä¼šå¼ºåˆ¶ä½¿ç”¨é™æ€åº“
target_link_libraries(main 
    PUBLIC 
    lvgl 
    lvgl::demos 
    m pthread 
)

add_custom_target (run COMMAND ${EXECUTABLE_OUTPUT_PATH}/main DEPENDS main)